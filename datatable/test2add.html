<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>jquery.datatable2</title>
    <link rel="stylesheet" href="css/jquery.dataTables.css">
    <link rel="stylesheet" href="css/3row.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.dataTables.js"></script>
    <style>
        .div-bgd{
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 999; 
        }
    	.addf{
    		position: absolute;
    		top: 30%;
    		left: 40%;
    		width: 500px;
    		border: 1px solid #ccc;
            z-index: 1000;
            background-color:#fff;
    	}
		.addf-head{
			height: 30px;
			background-color: #1f2d30;
			position: relative;
            z-index: 1000;
		}
		
    </style>
    <script type="text/javascript">
    //<![CDATA[
    var cssEl = document.createElement('style');
    document.documentElement.firstElementChild.appendChild(cssEl);

    function setPxPerRem() {
        var dpr = window.devicePixelRatio || 1;
        //把viewport分成10份的rem，html标签的font-size设置为1rem的大小;
        var pxPerRem = document.documentElement.clientWidth * dpr / 10;
        cssEl.innerHTML = 'html{font-size:' + pxPerRem + 'px!important;}';
        console.log(dpr);
    }
    setPxPerRem(); //]]>
    </script>
</head>

<body>
<div class="wrappers">
    <button id="addRow">add</button>
    <div class="div-bgd" style="display: none;">
        <div style="position: relative;width: 100%;height: 100%;">
            <div style="position:fixed;background-color:#333;opacity:0.4;filter:alpha(opacity=0);width:100%;height:100%;"></div>
        </div>
    </div>
    <div class="addf" id="addf" style="display: none;">
    	<div class="addf-head">
    		<a href="javascript:void(0);" id="close" class="close">关闭</a>
    	</div>
    	<div class="addf-cont">
    		<div class="addf-line">
    			<div class="clear"></div>
    				<label for="aname" class="addf-line-le">name:</label>
    				<div class="addf-line-mid">
    					<input type="text" id="aname" class="form-control" ></input>
    				</div>
    			<div class="clear"></div>
    		</div>
    		<div class="addf-line">
    			<div class="clear"></div>
    				<label for="aposition" class="addf-line-le">posiotion:</label>
    				<div class="addf-line-mid">
    					<input type="text" id="aposition" class="form-control" />
    				</div>
    			<div class="clear"></div>
    		</div>
    		<div class="addf-line">
    			<div class="clear"></div>
    				<label for="asalary" class="addf-line-le">salery:</label>
    				<div class="addf-line-mid">
    					<input type="text" id="asalary" class="form-control" />
    				</div>
    			<div class="clear"></div>
    		</div>
    		<div class="addf-line">
    			<div class="clear"></div>
    				<label for="aoffice" class="addf-line-le">office:</label>
    				<div class="addf-line-mid">
    					<input type="text" id="aoffice" class="form-control" />
    				</div>
    			<div class="clear"></div>
    		</div>
    		<div class="addf-line">
    			<div class="clear"></div>
    				<label for="aoption" class="addf-line-le">option:</label>
    				<div class="addf-line-mid">
    					<input type="text" id="aoption" class="form-control" />
    				</div>
    				
    			<div class="clear"></div>
    		</div>
            <!-- <div class="addf-line">
                <div class="clear"></div>
                    <label for="aoption" class="addf-line-le">extern:</label>
                    <div class="addf-line-mid">
                        <input type="text" id="aextern" class="form-control" />
                    </div>
                    
                <div class="clear"></div>
            </div> -->
    	</div>
    	<div class="addf-foot">
    		<button class="btn-save btn sure">确定</button>
    		<button class="btn-danger btn cansel">取消</button>
    	</div>
    </div>
    <table id="example" class="display">
        <thead>
            <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Salary</th>
                <th>Office</th>
                <th>option</th>
            </tr>
        </thead>
    </table>
</div>
</body>
<script>
$(document).ready(function($) {

    function showAddf(){
        $("#addf").css("display" ,"block");
        $(".div-bgd").css("display", "block");
        
    };
	
	function closeAddf(){
		$("#addf").css("display",  "none");
        $(".div-bgd").css("display", "none");
	}

    var data = [{
        "name": "Tiger Nixon",
        "position": "System Architect",
        "salary": "$3,120",
        "start_date": "2011/04/25",
        "office": "Edinburgh",
        "extn": "5421"
    }, {
        "name": "Garrett Winters",
        "position": "Director",
        "salary": "$5,300",
        "start_date": "2011/07/25",
        "office": "Edinburgh",
        "extn": "8422"
    }];
    var nameDat = $("#aname").html();
    var positionDat = $("#aposition").val();
    var salaryDat = $("#asalary").val();
    var officeDat = $("#aoffice").val();
    var optionDat = $("#aoption").val();
    console.log(nameDat, positionDat, salaryDat, officeDat, optionDat);
    $("#example").DataTable({
        data: data,
        columns: [{
            data: "name"
        }, {
            data: "position"
        }, {
            data: "salary"
        }, {
            data: "office"
        }],
        "columnDefs": [{
            "targets": 4,
            "data": "extn",
            "render": function(data) {
                return '<button class="dele">' + data + '</button>';
            }
        }]
    });
    var table = $("#example").DataTable();

    
    
    $(".dele").click(function() {
        table.row($(this).parents("tr")).remove().draw();
    });
    $("#addRow").click(function() {
    	showAddf();
    });
    $("#close").click(function() {
    	closeAddf();
    });
    $(".cansel").click(function() {
    	closeAddf();
    });
    $(".sure").click(function() {
    	closeAddf();
        console.log(nameDat, positionDat, salaryDat, officeDat, optionDat);
        table.row.add({
                "name": nameDat,
                "position": positionDat,
                "salary": salaryDat,
                "office": officeDat,
                "extn": optionDat
            }).draw();
    });
});
</script>

</html>
